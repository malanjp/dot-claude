これは、あなたに守ってもらいたい開発プラクティスや原則をまとめたものです。
依頼があるまで機能開発を始めないでください。
このドキュメントは「正しい心構え」に入るためのものです。

# 基本ルール

    1.	main ブランチにいることを確認（特定ブランチで作業するよう指示がある場合を除く）
    2.	コードを理解してから変更を始めること
    3.	機能・バグ修正・リファクタごとにブランチを作成
    4.	テスト駆動開発（TDD）を採用する

Red → Green → Refactor の流れ（下記参照）5. Git のコミットコメントに Claude のフッターを含めないこと 6. 機能や修正を終えたら GitHub にブランチを Push → Pull Request を作成 7. 複数の作業がある場合は、一つずつ終わらせてから次に移ること

# 高レベルの流れ

## 単一 vs 複数タスク

    •	1つのタスクだけ渡される場合と、複数渡される場合があります（例：GitHub Issues）
    •	複数ある場合は最初のものから順に取り組み、1タスクごとにブランチを作成・PRを提出

## ノートの作成

    •	notes/features/ 配下に Markdown ファイルを作成（ブランチ名と同じ名前でOK）
    •	質問の回答や重要なポイントなどをメモしておく（セッションが中断されたときの再開にも役立ちます）
    •	自分用なので、自由に追記・編集・削除してOK
    •	後の開発者にも役立つ内容を書くのは歓迎。ただし、簡潔に。

## 機能理解

    1.	README.md を読む。リンクされているドキュメントも確認。
    2.	あいまいな点は質問して明確にする

例：「三目並べアプリを作る」と言われたら「TUI？Webアプリ？他？」など聞いて確認。3. 得た知見や重要な情報があれば、README.md に追記して残す。

# 開発フロー（TDD）

以下を繰り返して、機能を実装していきます：

1. Red
   • まずは失敗するテストを書く（期待される新しい振る舞い）
   • この時点ではアプリの実装を変更しないこと！

2. Green
   • テストを通すための最小限のコードを書く
   • この時点ではテストコードは変更しないこと！
   • すべてのテストが通ったら git にコミット（まだ push はしない）

3. Refactor
   • コードを整理・改善（リーダビリティや保守性向上のため）
   • 必要に応じて、影響範囲全体を改善することもOK
   • Fowler流のリファクタリングを意識する
   • 小規模リファクタは1コミットでOK
   • 大規模なリファクタは段階的にコミットする
   • 全テストが通る状態でのみコミットする

この流れ（Red → Green → Refactor）を、1つの新しいテストごとに繰り返す。

## コミットメッセージの形式

    •	1行目：50文字以内の要約
    •	2行目：空行
    •	3行目以降：本文（1行72文字以内）
    •	Claude のフッターは付けないこと
    •	最終行に Issue のリンクを追加（Issueからタスクが来た場合）

## 「リファクタ依頼」の場合

開発フロー内のリファクタとは異なり、「リファクタのみを依頼された場合」は新しいテストを書く必要はありません。
リファクタは振る舞いを変えずに構造を整理する行為なので、テストを追加しないのが基本です。

## ガイドラインの追加

私（依頼者）が作業中に補足や訂正を行った場合は、このドキュメントに反映してください。
また、他にも有用なガイドラインがあれば、.claude/commands 以下に Markdown ファイルとして自由に追加してOKです。

## ファイルの場所

このファイルは常に以下の場所に置かれます: $PROJECT_ROOT/.claude/commands/tdd.md
上記と同じような「システムプロンプト的なMarkdownファイル」を .claude/commands/ に追加するのは自由です。
